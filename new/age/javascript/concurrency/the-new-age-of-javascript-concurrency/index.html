<!doctype html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8" lang="en"><![endif]-->
<!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"><!--<![endif]-->
<head>
<meta charset="utf-8">
<title>The New Age of JavaScript: Concurrency &#8211; Nintoku</title>
<meta name="description" content="The 16th emperor of Japan. A place to procrastinate while at work.">
<meta name="keywords" content="">

<!-- Twitter Cards -->
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://valera-rozuvan.github.io/nintoku/images/site-logo.png">
<meta name="twitter:title" content="The New Age of JavaScript: Concurrency">
<meta name="twitter:description" content="The 16th emperor of Japan. A place to procrastinate while at work.">
<meta name="twitter:creator" content="@ValeraRozuvan">

<!-- Open Graph -->
<meta property="og:locale" content="en_US">
<meta property="og:type" content="article">
<meta property="og:title" content="The New Age of JavaScript: Concurrency">
<meta property="og:description" content="The 16th emperor of Japan. A place to procrastinate while at work.">
<meta property="og:url" content="http://valera-rozuvan.github.io/nintoku/new/age/javascript/concurrency/the-new-age-of-javascript-concurrency">
<meta property="og:site_name" content="Nintoku">





<link rel="canonical" href="http://valera-rozuvan.github.io/nintoku/new/age/javascript/concurrency/the-new-age-of-javascript-concurrency">
<link href="http://valera-rozuvan.github.io/nintoku/feed.xml" type="application/atom+xml" rel="alternate" title="Nintoku Feed">
<link rel="author" href="https://plus.google.com/+ValeraRozuvan?rel=author">

<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- For all browsers -->
<link rel="stylesheet" href="http://valera-rozuvan.github.io/nintoku/assets/css/main.min.css">
<!-- Webfonts -->
<script src="//use.edgefonts.net/source-sans-pro:n2,i2,n3,i3,n4,i4,n6,i6,n7,i7,n9,i9;source-code-pro:n4,n7;volkhov.js"></script>

<meta http-equiv="cleartype" content="on">

<!-- Load Modernizr -->
<script src="http://valera-rozuvan.github.io/nintoku/assets/js/vendor/modernizr-2.6.2.custom.min.js"></script>

<!-- Load MathJax -->
<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

<!-- Icons -->
<!-- 16x16 -->
<link rel="shortcut icon" href="http://valera-rozuvan.github.io/nintoku/favicon.ico">
<!-- 32x32 -->
<link rel="shortcut icon" href="http://valera-rozuvan.github.io/nintoku/favicon.png">
<!-- 57x57 (precomposed) for iPhone 3GS, pre-2011 iPod Touch and older Android devices -->
<link rel="apple-touch-icon-precomposed" href="http://valera-rozuvan.github.io/nintoku/images/images/favicon-57.png">
<!-- 72x72 (precomposed) for 1st generation iPad, iPad 2 and iPad mini -->
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="http://valera-rozuvan.github.io/nintoku/images/favicon-72.png">
<!-- 114x114 (precomposed) for iPhone 4, 4S, 5 and post-2011 iPod Touch -->
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="http://valera-rozuvan.github.io/nintoku/images/images/favicon-114.png">
<!-- 144x144 (precomposed) for iPad 3rd and 4th generation -->
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="http://valera-rozuvan.github.io/nintoku/images/images/favicon-144.png">

</head>

<body id="post" itemscope itemtype="http://schema.org/WebPage">

<a class="fork-me" href="https://github.com/valera-rozuvan/nintoku">
  <img
    src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png"
    alt="Fork me on GitHub"
  />
</a>

<div class="navigation-wrapper">
  <nav role="navigation" id="site-nav" class="animated drop" itemscope itemtype="http://schema.org/SiteNavigationElement">
      <ul>
          
      <li>
        
          <a href="http://valera-rozuvan.github.io/nintoku/">Latest</a>
        
      </li>
          
      <li>
        
          <a href="http://valera-rozuvan.github.io/nintoku/about">About</a>
        
      </li>
          
      <li>
        
          <a href="http://valera-rozuvan.github.io/nintoku/archives">Archives</a>
        
      </li>
          
      <li>
        
          <a href="http://valera-rozuvan.github.io/nintoku/tags">Tags</a>
        
      </li>
          
      <li>
        
          <a href="http://google.com">Google</a>
        
      </li>
          
          <li><a href="http://valera-rozuvan.github.io/nintoku/feed.xml" title="Atom/RSS feed"><i class="icon-rss"></i> Feed</a></li>
          
      </ul>
  </nav>
</div><!-- /.navigation-wrapper -->

<!--[if lt IE 9]><div class="upgrade"><strong><a href="http://whatbrowser.org/">Your browser is quite old!</strong> Why not upgrade to a different browser to better enjoy this site?</a></div><![endif]-->




<header class="masthead" itemscope itemtype="http://schema.org/Organization">
  <div class="wrap">
    <a href="http://valera-rozuvan.github.io/nintoku" class="site-logo" rel="home" title="Nintoku" itemprop="url"><img src="http://valera-rozuvan.github.io/nintoku/images/site-logo.png" width="200" height="200" alt="Nintoku logo" class="animated fadeInUp" itemprop="logo"></a>
    <h1 class="site-title animated fadeIn"><a href="http://valera-rozuvan.github.io/nintoku">Nintoku</a></h1>
    <h2 class="site-description animated fadeIn" itemprop="description">The 16th emperor of Japan. A place to procrastinate while at work.</h2>
  </div>
</header><!-- /.masthead -->


<div id="main" role="main" itemprop="mainContentOfPage" itemscope itemtype="http://schema.org/Blog">
  <article class="hentry" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
    
    <div class="entry-wrapper">
      <header class="entry-header">
        <span class="entry-tags"></span>
        
          <h1 class="entry-title" itemprop="headline">The New Age of JavaScript: Concurrency</h1>
        
      </header>
      <footer class="entry-meta">
        <img src="http://valera-rozuvan.github.io/nintoku/images/your-photo.jpg" alt="Valera Rozuvan photo" class="author-photo">
        <span class="author vcard" itemprop="author" itemscope itemtype="http://schema.org/Person">By <span itemprop="name" class="fn"><a href="http://valera.rozuvan.net/" title="About Valera Rozuvan" itemprop="url">Valera Rozuvan</a></span></span>
        <span class="entry-date date published"><time datetime="2014-04-02T03:43:14+00:00" itemprop="datePublished"><i class="icon-calendar-empty"></i> April 02, 2014</time></span>
        
        
        <span><a href="http://valera-rozuvan.github.io/nintoku/new/age/javascript/concurrency/the-new-age-of-javascript-concurrency" rel="bookmark" title="The New Age of JavaScript: Concurrency" itemprop="url"><i class="icon-link"></i> Permalink</a></span>
        <span><a href="https://github.com/valera-rozuvan/nintoku/blob/master/site/_posts/2014-04-02-the-new-age-of-javascript-concurrency.markdown">source of post</a></span>
      </footer>
      <div class="entry-content" itemprop="description">
        <p><strong>UPDATE: This post is based on an error. <a href="http://valera-rozuvan.github.io/nintoku/update/update-the-new-age-of-javascript-concurrency">See why.</a></strong></p>

<p>It has long been known to me that the
<a href="http://en.wikipedia.org/wiki/JavaScript">JavaScript language</a>
(the browser variety) is single-threaded. I.e. at any one time there is
a single thread running JavaScript code. This means that at one time
only one function can be running. A more detailed explanation of this
fact is discussed by <a href="http://ejohn.org/about">John Resig</a> in his
<a href="http://ejohn.org/blog/how-javascript-timers-work">How JavaScript Timers Work</a>
post.</p>

<p>A natural question arises. If you use the
<a href="https://developer.mozilla.org/en/docs/Web/API/window.setInterval">window.setInterval</a>
method to get two functions to execute periodically at the same interval,
will they always (and for all time, while the browser is open) execute
one after the other, in the order of <code>window.setInterval</code> invocation?</p>

<p>So, to be more precise, if we have the following code:</p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">timeout1</span> <span class="o">=</span> <span class="nb">window</span><span class="p">.</span><span class="nx">setInterval</span><span class="p">(</span><span class="nx">timeoutFunc1</span><span class="p">,</span> <span class="mi">50</span><span class="p">),</span>
    <span class="nx">timeout2</span> <span class="o">=</span> <span class="nb">window</span><span class="p">.</span><span class="nx">setInterval</span><span class="p">(</span><span class="nx">timeoutFunc2</span><span class="p">,</span> <span class="mi">50</span><span class="p">);</span>

<span class="kd">function</span> <span class="nx">timeoutFunc1</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// It is given that window.output() is defined, and writes</span>
    <span class="c1">// it&#39;s parameter to the page for the user to see.</span>
    <span class="nb">window</span><span class="p">.</span><span class="nx">output</span><span class="p">(</span><span class="s1">&#39;1&#39;</span><span class="p">);</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">timeoutFunc2</span><span class="p">()</span> <span class="p">{</span>
    <span class="nb">window</span><span class="p">.</span><span class="nx">output</span><span class="p">(</span><span class="s1">&#39;2&#39;</span><span class="p">);</span>
<span class="p">}</span></code></pre></div>

<p>will we see on the page:</p>

<div class="highlight"><pre><code class="language-text" data-lang="text">1
2
1
2
1
2
1
2
1
2
1
2
...</code></pre></div>

<p>An interesting question. To further complicate things, what if one of
the periodically invoked functions did something else besides outputting
a number to the page. What if it took a long time to run, i.e. it would
execute 5 to 10 times longer? Would we then see something like this:</p>

<div class="highlight"><pre><code class="language-text" data-lang="text">2
2
2
2
1
2
2
2
1
2
2
2
...</code></pre></div>

<p>I have done a lot of reading on the subject of JavaScript concurrency,
parallelism, etc. I have started to believe that in the second example
above the two functions would still execute one after the other.</p>

<p>Then, today, I decided to write such a test, and see for myself what
would actually happen. I have created a JSFiddle to
<a href="http://jsfiddle.net/k2h7Z/34">test this out</a>.
The results were quite surprising for me.</p>

<p>I have tested in Internet Explorer, Opera, Google Chrome, and Firefox.
In all browsers except Firefox the two function ran one after the other.
In Firefox, though, the more CPU expensive function was running in parallel
with the fast function. I drew this conclusion for the fact that the slow
function managed to output once in the same time that the fast function
outputted several times.</p>

<blockquote>
  <p>In Firefox, though, the more CPU expensive function was running in parallel
with the fast function.</p>
</blockquote>

<p>I have used the following versions of the browsers:</p>

<ul>
  <li>Internet Explorer 10.0.9200.16576</li>
  <li>Opera 20.0.1387.82</li>
  <li>Google Chrome 33.0.1750.154</li>
  <li>Firefox 28.0</li>
</ul>

<p>Tested on an Intel x86 quad core machine running Windows 7.</p>

<p>Here are the screenshots of the results.</p>

<figure>
    <a href="http://valera-rozuvan.github.io/nintoku/images/2014_04_02/internet_explorer.png"><img src="http://valera-rozuvan.github.io/nintoku/images/2014_04_02/internet_explorer.png" /></a>
    <figcaption><a href="http://valera-rozuvan.github.io/nintoku/images/2014_04_02/internet_explorer.png" title="Internet Explorer">Internet Explorer</a>.</figcaption>
</figure>
<figure>
    <a href="http://valera-rozuvan.github.io/nintoku/images/2014_04_02/opera.png"><img src="http://valera-rozuvan.github.io/nintoku/images/2014_04_02/opera.png" /></a>
    <figcaption><a href="http://valera-rozuvan.github.io/nintoku/images/2014_04_02/opera.png" title="Opera">Opera</a>.</figcaption>
</figure>
<figure>
    <a href="http://valera-rozuvan.github.io/nintoku/images/2014_04_02/google_chrome.png"><img src="http://valera-rozuvan.github.io/nintoku/images/2014_04_02/google_chrome.png" /></a>
    <figcaption><a href="http://valera-rozuvan.github.io/nintoku/images/2014_04_02/google_chrome.png" title="Google Chrome">Google Chrome</a>.</figcaption>
</figure>
<figure>
    <a href="http://valera-rozuvan.github.io/nintoku/images/2014_04_02/firefox.png"><img src="http://valera-rozuvan.github.io/nintoku/images/2014_04_02/firefox.png" /></a>
    <figcaption><a href="http://valera-rozuvan.github.io/nintoku/images/2014_04_02/firefox.png" title="Firefox">Firefox</a>.</figcaption>
</figure>

        
      </div><!-- /.entry-content -->
    </div><!-- /.entry-wrapper -->
    <nav class="pagination" role="navigation">
      
        <a href="http://valera-rozuvan.github.io/nintoku/namespacing/youtube/url/edx/backend/namespacing-all-youtube-urls-on-edx-backend" class="btn" title="Namespacing all YouTube URLs on edX backend">Previous article</a>
      
      
        <a href="http://valera-rozuvan.github.io/nintoku/tiling/window/manager/tiling-window-managers" class="btn" title="Tiling window managers">Next article</a>
      
    </nav><!-- /.pagination -->
  </article>
</div><!-- /#main -->

<div class="footer-wrapper">
  <footer role="contentinfo">
    <span>&copy; 2013 - 2015 <a href="http://valera.rozuvan.net/">Valera Rozuvan</a>. Powered by <a href="http://jekyllrb.com">Jekyll</a> using the <a href="https://mademistakes.com/work/so-simple-jekyll-theme/">So Simple Theme</a>.</span>
<div class="social-icons">
  <a href="http://twitter.com/ValeraRozuvan" title="Valera Rozuvan on Twitter" target="_blank"><i class="icon-twitter icon-2x"></i></a>
  <a href="http://facebook.com/valera.rozuvan" title="Valera Rozuvan on Facebook" target="_blank"><i class="icon-facebook icon-2x"></i></a>
  <a href="https://plus.google.com/+ValeraRozuvan" title="Valera Rozuvan on Google+" target="_blank"><i class="icon-google-plus icon-2x"></i></a>
  <a href="http://linkedin.com/pub/valera-rozuvan/53/a5b/ba8" title="Valera Rozuvan on LinkedIn" target="_blank"><i class="icon-linkedin icon-2x"></i></a>
  
  
  
  <a href="http://github.com/valera-rozuvan" title="Valera Rozuvan on Github" target="_blank"><i class="icon-github icon-2x"></i></a>
  
</div><!-- /.social-icons -->

  </footer>
</div><!-- /.footer-wrapper -->

<script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script type="text/javascript">
    window.jQuery || document.write('<script src="http://valera-rozuvan.github.io/nintoku/assets/js/vendor/jquery-1.9.1.min.js"><\/script>');
</script>
<script type="text/javascript" src="http://valera-rozuvan.github.io/nintoku/assets/js/scripts.min.js"></script>




<!-- Google Analytics snippet. -->
<script type="text/javascript">
    var _gaq = _gaq || [];

    _gaq.push(['_setAccount', 'UA-49332155-1']);
    _gaq.push(['_trackPageview']);

    (function () {
        var ga, s;

        ga = document.createElement('script');
        ga.type = 'text/javascript';
        ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';

        s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(ga, s);
    }());
</script>





</body>
</html>
